{"pageProps":{"markdoc":{"content":{"$$mdtype":"Tag","name":"article","attributes":{},"children":[{"$$mdtype":"Tag","name":"Heading","attributes":{"id":"overview","level":1},"children":["レジストリ"," "]},{"$$mdtype":"Tag","name":"p","attributes":{},"children":["レジストリは、アプリケーションやファイルのバージョン管理を担うDewyの中核コンポーネントです。\nDewyはセマンティックバージョニングに基づいて最新版を自動検出し、継続的なデプロイメントを実現します。\n"]},{"$$mdtype":"Tag","name":"Heading","attributes":{"level":2,"id":"対応レジストリ"},"children":["対応レジストリ"]},{"$$mdtype":"Tag","name":"p","attributes":{},"children":["Dewyは以下のレジストリタイプに対応しています。"]},{"$$mdtype":"Tag","name":"ul","attributes":{},"children":[{"$$mdtype":"Tag","name":"li","attributes":{},"children":[{"$$mdtype":"Tag","name":"strong","attributes":{},"children":["GitHub Releases"]}," (",{"$$mdtype":"Tag","name":"code","attributes":{},"children":["ghr://"]},"): GitHubのリリース機能"]},{"$$mdtype":"Tag","name":"li","attributes":{},"children":[{"$$mdtype":"Tag","name":"strong","attributes":{},"children":["AWS S3"]}," (",{"$$mdtype":"Tag","name":"code","attributes":{},"children":["s3://"]},"): Amazon S3ストレージ"]},{"$$mdtype":"Tag","name":"li","attributes":{},"children":[{"$$mdtype":"Tag","name":"strong","attributes":{},"children":["Google Cloud Storage"]}," (",{"$$mdtype":"Tag","name":"code","attributes":{},"children":["gs://"]},"): Google Cloudストレージ"]},{"$$mdtype":"Tag","name":"li","attributes":{},"children":[{"$$mdtype":"Tag","name":"strong","attributes":{},"children":["gRPC"]}," (",{"$$mdtype":"Tag","name":"code","attributes":{},"children":["grpc://"]},"): カスタムgRPCサーバー"]}]},{"$$mdtype":"Tag","name":"Heading","attributes":{"level":2,"id":"共通オプション"},"children":["共通オプション"]},{"$$mdtype":"Tag","name":"p","attributes":{},"children":["すべてのレジストリで使用できる共通オプションがあります。"]},{"$$mdtype":"Tag","name":"Table","attributes":{},"children":[{"$$mdtype":"Tag","name":"thead","attributes":{},"children":[{"$$mdtype":"Tag","name":"tr","attributes":{},"children":[{"$$mdtype":"Tag","name":"th","attributes":{},"children":["オプション"]},{"$$mdtype":"Tag","name":"th","attributes":{},"children":["型"]},{"$$mdtype":"Tag","name":"th","attributes":{},"children":["説明"]}]}]},{"$$mdtype":"Tag","name":"tbody","attributes":{},"children":[{"$$mdtype":"Tag","name":"tr","attributes":{},"children":[{"$$mdtype":"Tag","name":"td","attributes":{},"children":[{"$$mdtype":"Tag","name":"code","attributes":{},"children":["pre-release"]}]},{"$$mdtype":"Tag","name":"td","attributes":{},"children":["bool"]},{"$$mdtype":"Tag","name":"td","attributes":{},"children":["プレリリースバージョンを含めるかどうか"]}]},{"$$mdtype":"Tag","name":"tr","attributes":{},"children":[{"$$mdtype":"Tag","name":"td","attributes":{},"children":[{"$$mdtype":"Tag","name":"code","attributes":{},"children":["artifact"]}]},{"$$mdtype":"Tag","name":"td","attributes":{},"children":["string"]},{"$$mdtype":"Tag","name":"td","attributes":{},"children":["自動選択されないアーティファクト名を明示指定"]}]}]}]},{"$$mdtype":"Tag","name":"Heading","attributes":{"level":2,"id":"github-releases"},"children":["GitHub Releases"]},{"$$mdtype":"Tag","name":"p","attributes":{},"children":["GitHubリリースをレジストリとして使用する最も一般的な方法です。"]},{"$$mdtype":"Tag","name":"Heading","attributes":{"level":3,"id":"基本設定"},"children":["基本設定"]},{"$$mdtype":"Tag","name":"Fence","attributes":{"data-language":"bash"},"children":["# 基本形式\nghr://<owner>/<repo>\n\n# 例\ndewy server --registry ghr://linyows/myapp -- /opt/myapp/current/myapp\n"]},{"$$mdtype":"Tag","name":"Heading","attributes":{"level":3,"id":"環境変数"},"children":["環境変数"]},{"$$mdtype":"Tag","name":"Fence","attributes":{"data-language":"bash"},"children":["export GITHUB_TOKEN=ghp_xxxxxxxxxxxxxxxxxxxx\n"]},{"$$mdtype":"Tag","name":"p","attributes":{},"children":["GitHubのPersonal Access Tokenまたは、GitHub Actionsの場合は",{"$$mdtype":"Tag","name":"code","attributes":{},"children":["GITHUB_TOKEN"]},"を設定します。"]},{"$$mdtype":"Tag","name":"Heading","attributes":{"level":3,"id":"オプション付きの例"},"children":["オプション付きの例"]},{"$$mdtype":"Tag","name":"Fence","attributes":{"data-language":"bash"},"children":["# プレリリース版も含める（ステージング環境）\ndewy server --registry \"ghr://linyows/myapp?pre-release=true\"\n\n# 特定のアーティファクトを指定\ndewy server --registry \"ghr://linyows/myapp?artifact=myapp-server.tar.gz\"\n\n# 両方のオプションを使用\ndewy server --registry \"ghr://linyows/myapp?pre-release=true&artifact=myapp-server.tar.gz\"\n"]},{"$$mdtype":"Tag","name":"Heading","attributes":{"level":3,"id":"アーティファクトの自動選択"},"children":["アーティファクトの自動選択"]},{"$$mdtype":"Tag","name":"p","attributes":{},"children":["アーティファクト名を指定しない場合、Dewyは以下の規則で自動選択します："]},{"$$mdtype":"Tag","name":"ol","attributes":{},"children":[{"$$mdtype":"Tag","name":"li","attributes":{},"children":["現在のOS（",{"$$mdtype":"Tag","name":"code","attributes":{},"children":["linux"]},", ",{"$$mdtype":"Tag","name":"code","attributes":{},"children":["darwin"]},", ",{"$$mdtype":"Tag","name":"code","attributes":{},"children":["windows"]},"）を含むファイル名"]},{"$$mdtype":"Tag","name":"li","attributes":{},"children":["現在のアーキテクチャ（",{"$$mdtype":"Tag","name":"code","attributes":{},"children":["amd64"]},", ",{"$$mdtype":"Tag","name":"code","attributes":{},"children":["arm64"]},"等）を含むファイル名"]},{"$$mdtype":"Tag","name":"li","attributes":{},"children":["最初にマッチしたアーティファクトを選択"]}]},{"$$mdtype":"Tag","name":"p","attributes":{},"children":["例：Linux amd64環境では ",{"$$mdtype":"Tag","name":"code","attributes":{},"children":["myapp_linux_amd64.tar.gz"]}," が自動選択されます。"]},{"$$mdtype":"Tag","name":"Callout","attributes":{"type":"important"},"children":[{"$$mdtype":"Tag","name":"p","attributes":{},"children":["新しく作成されたリリースについては、CI/CDでのアーティファクトビルド時間を考慮して30分間のグレースピリオドがあります。"," ","この間は「アーティファクトが見つからない」エラーが発生しても通知されません。"]}]},{"$$mdtype":"Tag","name":"Heading","attributes":{"level":2,"id":"aws-s3"},"children":["AWS S3"]},{"$$mdtype":"Tag","name":"p","attributes":{},"children":["S3互換ストレージをレジストリとして使用できます。"]},{"$$mdtype":"Tag","name":"Heading","attributes":{"level":3,"id":"基本設定"},"children":["基本設定"]},{"$$mdtype":"Tag","name":"Fence","attributes":{"data-language":"bash"},"children":["# 基本形式\ns3://<region>/<bucket>/<path-prefix>\n\n# 例\ndewy server --registry s3://ap-northeast-1/my-releases/myapp\n"]},{"$$mdtype":"Tag","name":"Heading","attributes":{"level":3,"id":"環境変数"},"children":["環境変数"]},{"$$mdtype":"Tag","name":"Fence","attributes":{"data-language":"bash"},"children":["export AWS_ACCESS_KEY_ID=AKIAIOSFODNN7EXAMPLE\nexport AWS_SECRET_ACCESS_KEY=wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY\n\n# オプション：エンドポイントURL（S3互換サービス用）\nexport AWS_ENDPOINT_URL=https://s3.isk01.sakurastorage.jp\n"]},{"$$mdtype":"Tag","name":"Heading","attributes":{"level":3,"id":"オブジェクトパス規則"},"children":["オブジェクトパス規則"]},{"$$mdtype":"Tag","name":"p","attributes":{},"children":["S3内のオブジェクトは以下の構造で配置する必要があります："]},{"$$mdtype":"Tag","name":"Fence","attributes":{},"children":["<path-prefix>/<semver>/<artifact>\n"]},{"$$mdtype":"Tag","name":"p","attributes":{},"children":["実際の例："]},{"$$mdtype":"Tag","name":"Fence","attributes":{},"children":["my-releases/myapp/v1.2.4/myapp_linux_amd64.tar.gz\nmy-releases/myapp/v1.2.4/myapp_linux_arm64.tar.gz\nmy-releases/myapp/v1.2.4/myapp_darwin_arm64.tar.gz\nmy-releases/myapp/v1.2.3/myapp_linux_amd64.tar.gz\nmy-releases/myapp/v1.2.3/myapp_linux_arm64.tar.gz\nmy-releases/myapp/v1.2.3/myapp_darwin_arm64.tar.gz\n"]},{"$$mdtype":"Tag","name":"Heading","attributes":{"level":3,"id":"オプション付きの例"},"children":["オプション付きの例"]},{"$$mdtype":"Tag","name":"Fence","attributes":{"data-language":"bash"},"children":["# カスタムエンドポイント（さくらのクラウド等）\ndewy server --registry \"s3://jp-north-1/my-bucket/myapp?endpoint=https://s3.isk01.sakurastorage.jp\"\n\n# プレリリース版を含める\ndewy server --registry \"s3://us-west-2/releases/myapp?pre-release=true\"\n"]},{"$$mdtype":"Tag","name":"Heading","attributes":{"level":2,"id":"google-cloud-storage"},"children":["Google Cloud Storage"]},{"$$mdtype":"Tag","name":"p","attributes":{},"children":["Google Cloud StorageをレジストリとSupport使用できます。"]},{"$$mdtype":"Tag","name":"Heading","attributes":{"level":3,"id":"基本設定"},"children":["基本設定"]},{"$$mdtype":"Tag","name":"Fence","attributes":{"data-language":"bash"},"children":["# 基本形式\ngs://<bucket>/<path-prefix>\n\n# 例\ndewy server --registry gs://my-releases-bucket/myapp\n"]},{"$$mdtype":"Tag","name":"Heading","attributes":{"level":3,"id":"環境変数"},"children":["環境変数"]},{"$$mdtype":"Tag","name":"Fence","attributes":{"data-language":"bash"},"children":["# サービスアカウントキーを使用\nexport GOOGLE_APPLICATION_CREDENTIALS=/path/to/service-account.json\n"]},{"$$mdtype":"Tag","name":"p","attributes":{},"children":["または、Google Cloud SDKの認証情報やWorkload Identityを使用することも可能です。"]},{"$$mdtype":"Tag","name":"Heading","attributes":{"level":3,"id":"オブジェクトパス規則"},"children":["オブジェクトパス規則"]},{"$$mdtype":"Tag","name":"p","attributes":{},"children":["S3と同様の構造で配置します："]},{"$$mdtype":"Tag","name":"Fence","attributes":{},"children":["myapp/v1.2.4/myapp_linux_amd64.tar.gz\nmyapp/v1.2.4/myapp_darwin_arm64.tar.gz\nmyapp/v1.2.3/myapp_linux_amd64.tar.gz\n"]},{"$$mdtype":"Tag","name":"Heading","attributes":{"level":2,"id":"grpc"},"children":["gRPC"]},{"$$mdtype":"Tag","name":"p","attributes":{},"children":["カスタムgRPCサーバーをレジストリとして使用できます。"]},{"$$mdtype":"Tag","name":"Heading","attributes":{"level":3,"id":"基本設定"},"children":["基本設定"]},{"$$mdtype":"Tag","name":"Fence","attributes":{"data-language":"bash"},"children":["# 基本形式\ngrpc://<server-host>\n\n# 例\ndewy server --registry grpc://registry.example.com:9000\n\n# TLS無しの場合\ndewy server --registry \"grpc://localhost:9000?no-tls=true\"\n"]},{"$$mdtype":"Tag","name":"Heading","attributes":{"level":3,"id":"特徴"},"children":["特徴"]},{"$$mdtype":"Tag","name":"ul","attributes":{},"children":[{"$$mdtype":"Tag","name":"li","attributes":{},"children":["gRPCサーバーがアーティファクトURLを動的に提供"]},{"$$mdtype":"Tag","name":"li","attributes":{},"children":[{"$$mdtype":"Tag","name":"code","attributes":{},"children":["pre-release"]},"や",{"$$mdtype":"Tag","name":"code","attributes":{},"children":["artifact"]},"オプションは使用不可"]},{"$$mdtype":"Tag","name":"li","attributes":{},"children":["カスタムロジックによる柔軟な制御が可能"]}]},{"$$mdtype":"Tag","name":"Heading","attributes":{"level":2,"id":"セマンティックバージョニング"},"children":["セマンティックバージョニング"]},{"$$mdtype":"Tag","name":"p","attributes":{},"children":["Dewyはセマンティックバージョニング（semver）に準拠したバージョン管理を行います。"]},{"$$mdtype":"Tag","name":"Heading","attributes":{"level":3,"id":"対応形式"},"children":["対応形式"]},{"$$mdtype":"Tag","name":"Fence","attributes":{"data-language":"bash"},"children":["# 標準的なバージョン\nv1.2.3\n1.2.3\n\n# プレリリース版\nv1.2.3-rc\nv1.2.3-beta.2\nv1.2.3-alpha.1\n"]},{"$$mdtype":"Tag","name":"Heading","attributes":{"level":3,"id":"プレリリース版の使い分け"},"children":["プレリリース版の使い分け"]},{"$$mdtype":"Tag","name":"Fence","attributes":{"data-language":"bash"},"children":["# 本番環境（安定版のみ）\ndewy server --registry ghr://myorg/myapp\n\n# ステージング環境（プレリリース版も含む）\ndewy server --registry \"ghr://myorg/myapp?pre-release=true\"\n"]},{"$$mdtype":"Tag","name":"Heading","attributes":{"level":2,"id":"ci/cdパイプラインでの使用"},"children":["CI/CDパイプラインでの使用"]},{"$$mdtype":"Tag","name":"Fence","attributes":{"data-language":"bash"},"children":["# GitHub Actions\n- name: Deploy with Dewy\n  env:\n    GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}\n  run: |\n    dewy server --registry ghr://${{ github.repository }} \\\n      --log-level info --port 8080 -- /opt/app/current/app\n"]},{"$$mdtype":"Tag","name":"Heading","attributes":{"level":2,"id":"マルチステージデプロイメント"},"children":["マルチステージデプロイメント"]},{"$$mdtype":"Tag","name":"Fence","attributes":{"data-language":"bash"},"children":["# ステージング環境\nENVIRONMENT=staging dewy server \\\n  --registry \"ghr://myorg/myapp?pre-release=true\" \\\n  --notifier \"slack://staging-deploy?title=myapp-staging\"\n\n# 本番環境\nENVIRONMENT=production dewy server \\\n  --registry \"ghr://myorg/myapp\" \\\n  --notifier \"slack://prod-deploy?title=myapp-prod\"\n"]},{"$$mdtype":"Tag","name":"Heading","attributes":{"level":2,"id":"トラブルシューティング"},"children":["トラブルシューティング"]},{"$$mdtype":"Tag","name":"Heading","attributes":{"level":3,"id":"アーティファクトが見つからない"},"children":["アーティファクトが見つからない"]},{"$$mdtype":"Tag","name":"ol","attributes":{},"children":[{"$$mdtype":"Tag","name":"li","attributes":{},"children":[{"$$mdtype":"Tag","name":"strong","attributes":{},"children":["バージョンタグの確認"]},": セマンティックバージョニングに準拠しているか"]},{"$$mdtype":"Tag","name":"li","attributes":{},"children":[{"$$mdtype":"Tag","name":"strong","attributes":{},"children":["アーティファクト名の確認"]},": OS/アーキテクチャが含まれているか"]},{"$$mdtype":"Tag","name":"li","attributes":{},"children":[{"$$mdtype":"Tag","name":"strong","attributes":{},"children":["権限の確認"]},": 認証情報が正しく設定されているか"]}]},{"$$mdtype":"Tag","name":"Heading","attributes":{"level":3,"id":"デバッグ方法"},"children":["デバッグ方法"]},{"$$mdtype":"Tag","name":"Fence","attributes":{"data-language":"bash"},"children":["# デバッグログを有効にして詳細を確認\ndewy server --registry ghr://owner/repo --log-level debug\n"]},{"$$mdtype":"Tag","name":"p","attributes":{},"children":["レジストリは Dewy の動作の中核となる重要なコンポーネントです。用途に応じて適切なレジストリタイプを選択し、効率的なデプロイメント環境を構築してください。"]}]},"frontmatter":{"title":"レジストリ","description":"レジストリは、アプリケーションやファイルのバージョン管理を担うDewyの中核コンポーネントです。\nDewyはセマンティックバージョニングに基づいて最新版を自動検出し、継続的なデプロイメントを実現します。\n"},"file":{"path":"/ja/registry.md"}}},"__N_SSG":true}